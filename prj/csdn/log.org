* blog
** blog import
*** csdn
**** http://blog.csdn.net/ithzhang/default.aspx?PageNumber=1
**** http://blog.csdn.net/ithzhang/article/list/1
**** http://www.cnblogs.com/slimcn/services/metaweblog.aspx
**** alter table `blog_categories` convert to character set utf8 collate utf8_swedish_ci;

  [4;36;1mBlogCategory Load (0.0ms)[0m   [0;1mMysql::Error: Illegal mix of collations (latin1_swedish_ci,IMPLICIT) and (utf8_general_ci,COERCIBLE) for operation '=': SELECT * FROM `blog_categories` WHERE (`blog_categories`.`user_id` = 537044 AND `blog_categories`.`name` = '[ç½‘ç«™åˆ†ç±»]Html/Css') LIMIT 1[0m
* ip_firewall
** redis
   http://redis.io/
   http://baike.baidu.com/view/4595959.htm
   [[http://timyang.net/data/redis-misunderstanding/][Rediså‡ ä¸ªè®¤è¯†è¯¯åŒº]]
   [[http://www.docin.com/p-189464848.html][Rediså­¦ä¹ ç¬”è®°]]

   http://jimneath.org/2011/03/24/using-redis-with-ruby-on-rails.html
** memcached
** benchmark
*** ç”¨Benchmarkæµ‹è¯•ä¸åŒrubyä»£ç çš„è¿è¡Œé€Ÿåº¦
    http://www.cslog.cn/Content/ruby_benchmark/
    å¦‚æœæ¯”è¾ƒåŠŸèƒ½ç›¸åŒçš„å‡ ç»„ä»£ç çš„è¿è¡Œé€Ÿåº¦, å¯ä»¥ä½¿ç”¨rubyè¯­è¨€é‡Œçš„Benchmarkæ¨¡å—.
(å¼€å§‹å‰ è®¾ç½®ä¸­æ–‡ç¯å¢ƒ, $KCODE = â€˜uâ€™)
æ¯”å¦‚, è¿æ¥ä¸¤ä¸ªå­—ä¸², å¦‚:
str1 = "ä¸­å›½"
str2 = "ä¸€å®šå¼º!!!"

å¯ä»¥ä½¿ç”¨+
?> str1 + str2
=> "ä¸­å›½ä¸€å®šå¼º!!!"
ä¹Ÿå¯ä½¿ç”¨
>> "#{str1}#{str2}"
=> "ä¸­å›½ä¸€å®šå¼º!!!"
è¿˜å¯ä»¥ä½¿ç”¨<<
>> str1 << str2
=> "ä¸­å›½ä¸€å®šå¼º!!!"
(æ³¨æ„è¿™ç§æ–¹æ³•ä¼šæ”¹å˜str1çš„å€¼,
>> str1
=> "ä¸­å›½ä¸€å®šå¼º!!!")

å¦‚æœæƒ³è¦çŸ¥é“è¿™ä¸‰ç§æ–¹æ³•å“ªä¸€ä¸ªé€Ÿåº¦æ›´å¿«, å°±å¯ä»¥ä½¿ç”¨Benchmarkæ¯”è¾ƒ.
å…ˆå®šä¹‰ä¸‰ä¸ªä¸åŒçš„æ–¹æ³•:

def joined_by_plus(str_a, str_b)
    500000.times do; str_a.dup + str_b; end
end

def joined_by_uniting(str_a, str_b)
    500000.times do; "#{str_a.dup}#{str_b}"; end
end

def joined_by_adding(str_a, str_b)
    500000.times do; str_a.dup << str_b; end
end

å› ä¸ºè¿™ä¸‰ç§æ–¹æ³•é€Ÿåº¦éƒ½å¾ˆå¿«, æ¯”è¾ƒä¸€æ¬¡çš„æ—¶é—´å¾ˆéš¾åˆ†å‡ºä¸Šä¸‹, æ‰€ä»¥æ¯ç§æ–¹æ³•éƒ½åš500000æ¬¡.
å› ä¸º<< ä¼šæ”¹å˜å˜é‡, æ‰€ä»¥åœ¨ç¬¬ä¸‰ä¸ªæ–¹æ³•ä¸­ä½¿ç”¨äº†str_a.dup, å¤‡ä»½å‡ºä¸€ä¸ªstr_aæ¥æµ‹è¯•, å…¶å®ƒäºŒä¸ªæ–¹æ³•è™½ç„¶ä»ç†è®ºä¸Šä¸é¡»è¦è¿™ä¸ªdup, ä½†ä¸ºäº†æ—¶é—´ä¸Šçš„å…¬å¹³, ä¹Ÿç»™å®ƒä»¬åŠ ä¸Šäº†.

ä¸‹é¢æ˜¯æµ‹è¯•ä»£ç :
require â€˜benchmarkâ€™

Benchmark.bmbm(10) do |t|
  t.report(â€˜åŠ å·è¿æ¥â€™) { joined_by_plus(str1, str2) }
  t.report(â€˜æ”¾è¿›å¼•å·â€™) { joined_by_uniting(str1, str2)}
  t.report(â€˜ä½¿ç”¨<<â€™) { joined_by_adding(str1, str2)}
end

bmbmæ˜¯Benchmarkçš„æµ‹è¯•æ–¹æ³•, è¿™æ˜¯åŒé‡æµ‹è¯•, ç”¨æ¥æé«˜ç²¾ç¡®åº¦. é‡Œé¢å‚æ•°10ç”¨æ¥è°ƒèŠ‚æ ‡ç­¾åœ¨ç»“æœé‡Œçš„æ˜¾ç¤ºå ä½å®½åº¦, ä¸å¯¹ç»“æœäº§ç”Ÿå½±å“.
report(â€˜åŠ å·è¿æ¥â€™)é‡Œçš„å‚æ•°æ˜¯ä¸ºç›¸åº”æµ‹è¯•çš„æ ‡ç­¾å, ç”¨æ¥åŒºåˆ«æµ‹è¯•ç»“æœ.

ä¸‹é¢å°±æ˜¯ç»“æœ:

Rehearsal â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
åŠ å·è¿æ¥   1.800000   0.580000   2.380000 (  2.435614)
æ”¾è¿›å¼•å·   2.080000   0.590000   2.670000 (  2.706669)
ä½¿ç”¨<<       2.000000   0.580000   2.580000 (  2.635540)
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” total: 7.630000sec

                   user     system      total        real
åŠ å·è¿æ¥   1.810000   0.600000   2.410000 (  2.476613)
æ”¾è¿›å¼•å·   2.050000   0.600000   2.650000 (  2.656080)
ä½¿ç”¨<<       1.960000   0.600000   2.560000 (  2.567434)

å› ä¸ºä½¿ç”¨äº†bmbmæ–¹å¼, æ‰€ä»¥ä¼šæœ‰ä¸¤ä¸ªç»“æœ, ç¬¬ä¸€ä¸ªæ˜¯æ¼”ä¹ ç»“æœ, ç¬¬äºŒä¸ªæ˜¯çœŸå®ç»“æœ.  å¦‚æœä½¿ç”¨bmæ–¹æ³•, å°†åªä¼šæœ‰ä¸€ç»„ç»“æœ.
ç»“æœæœ‰useræ—¶é—´, ç³»ç»Ÿæ—¶é—´, æ€»æ—¶é—´å’Œå®é™…èŠ±è´¹çš„æ—¶é—´. å•ä½ä¸ºç§’.

ä»ç»“æœå¯ä»¥çœ‹å‡º, ä½¿ç”¨+è¿æ¥ä¸¤ä¸ªå­—ä¸²æ—¶é€Ÿåº¦æœ€å¿«, è€Œæ”¾è¿›å¼•å·çš„æ–¹æ³•æœ€æ…¢. ä¸è¿‡ä»ç»“æœä¹Ÿå¯ä»¥çœ‹å‡ºå³ä½¿è¿›è¡Œ500000æ‰§è¡Œçš„ç»“æœä¹Ÿç›¸å·®åœ¨0.3ç§’ä¹‹å†…, å¹³æ—¶æ¢ç”¨é—®é¢˜ä¸å¤§.

çœ‹æ¥ä¸æ˜¯è¿™ä¸€æ¬¡, å¸Œæœ›ä¸‹æ¬¡ä½ åœ¨è‡ªå·±çš„Benchmarkè¯•éªŒä¸­, ä¼šå‘ç°ç»™ä½ çš„ç¨‹åºå¸¦æ¥å·¨å¤§é€Ÿåº¦æä¾›çš„ä»£ç .
* javaeye3 project  ä¸“æ +åœˆå­+ç»´å®¢ --> ç¾¤ç»„
** git repo: git clone -b preview git@git.csdn.net:javaeye_repo/javaeye3.git
** ruby=ree-1.8.7 rails=2.3.4 gem<1.6
** mysql
   gem install mysql
** fcgi
   sudo apt-get install libfcgi-dev
   gem install fcgi
   # è‹¥å®‰è£…å‡ºé”™ï¼Œé‡æ–°å®‰è£…å‰æ‰‹å·¥åˆ é™¤å¯¹åº”gemæ–‡ä»¶å¤¹

*** sudo /sbin/start-stop-daemon --quiet --start --pidfile /var/run/lighttpd.pid --exec /usr/local/lighttpd/sbin/lighttpd -- -f /etc/lighttpd/lighttpd.conf 2
*** /usr/local/bin/spawn-fcgi -s /tmp/php-fastcgi.sock -f /tmp/php-fastcgi.sock -u lighttpd -g lighttpd -C 10 -P /var/run/spawn-fcgi.pid

sudo apt-get install libfcgi-dev libfcgi0ldbl
gem install fcgi
sudo apt-get install apache2 apache2.2-common libapache2-mod-fastcgi # apache2

 * To install Apache 2 development headers:
   Please run apt-get install apache2-prefork-dev as root.

 * To install Apache Portable Runtime (APR) development headers:
   Please run apt-get install libapr1-dev as root.

 * To install Apache Portable Runtime Utility (APU) development headers:
   Please run apt-get install libaprutil1-dev as root.

  sudo apt-get install libapr1-dev libaprutil1-dev

/home/sjm/programs/ree/bin/passenger-install-apache2-module


sudo apt-get update
sudo apt-get install libpcre3 libpcre3-dev

ä½ å¯èƒ½è¿˜éœ€è¦å®‰è£…
sudo apt-get install openssl libssl-dev

** memcached -v=1
sudo apt-get install libmemcached-dev libsasl2-dev libmemcached-dbg
gem install memcached

** nokogiri
gem install nokogiri


* 20110503 æ­å»ºç¯å¢ƒï¼šç³»ç»Ÿã€åº”ç”¨ç¨‹åºã€é¡¹ç›®ã€æ–‡ä»¶ç­¾å­—
** mail.csdn.net  shangjm  csdnshangjm  å®¢æˆ·ç«¯ï¼šshangjm@csdn.net  mail.csdn.net
** jira.csdn.net  shangjm  csdnshangjm
** rtx: å•†æ•¬æ°‘ csdnshangjm
** iteye
   search test: 192.168.4.97
* rails_best_practice
** url
   http://rails-bestpractices.com/
   http://rdoc.rails-bestpractices.com/
   http://www.slideshare.net/flyerhzm/rails-best-practices-7409659
   https://github.com/flyerhzm/rails_best_practices
   http://programmingzen.com/2011/04/20/review-of-rails-best-practices/

** nodes NODE_TYPES = [:call, :defn, :defs, :if, :class, :lasgn, :iasgn, :ivar, :lvar, :block, :iter, :const]
*** sexp åˆ†æå·¥å…· èŠ‚ç‚¹ç±»å‹
    http://rubydoc.info/gems/ParseTree/3.0.7/RawParseTree
*** Rspec \ Cucumber
**** BDD
     ä»€ä¹ˆæ˜¯è¡Œä¸ºé©±åŠ¨å¼€å‘ï¼ˆBehaviour Driven Developmentï¼Œç®€ç§°BDDï¼‰ï¼ŒBDDæ˜¯ä¸€ç§èåˆäº†å¯æ¥å—æ€§æµ‹è¯•é©±åŠ¨è®¡åˆ’ï¼ˆAcceptance Test Driven Planningï¼‰ï¼ŒåŸŸé©±åŠ¨è®¾è®¡ï¼ˆDomain Driven Designï¼‰ä»¥åŠæµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTest Driven Developmentï¼Œç®€ç§°TDDï¼‰çš„æ•æ·å¼€å‘æ¨¡å‹ã€‚RSpecä¸ºBDDå¼€å‘æä¾›TDDæ”¯æŒã€‚
**** rspec install
** gem dev
   http://www.jiangmiao.org/blog/639.html
*** 2ã€gemçš„åŸºæœ¬æ–‡ä»¶å¸ƒå±€
æ–‡ä»¶å  ç±»åˆ«    æè¿°
gemspec æ–‡ä»¶    gemçš„è§„èŒƒè¯´æ˜ã€‚
lib     æ–‡ä»¶å¤¹  ç”¨äºlibæ–‡ä»¶çš„å­˜æ”¾
bin     æ–‡ä»¶å¤¹  å¯æ‰§è¡Œæ–‡ä»¶
ext     æ–‡ä»¶å¤¹  c/c++æºæ–‡ä»¶
tests   æ–‡ä»¶å¤¹  å•å…ƒæµ‹è¯•æ–‡ä»¶
*** 3ã€gemspecæ–‡ä»¶è§„èŒƒå¸¸ç”¨é¡¹
åç§°    ç±»åˆ«    ç¼ºçœ    æè¿°
name    String          gemåç§°
*version        String          ç‰ˆæœ¬å·
*date   Time    Time.now        Gemåˆ›å»ºæ—¥æœŸ
*platform       String  Gem::Platform::Ruby     gemsæ‰€ä½¿ç”¨çš„å¹³å°
*summary        String          gemæè¿°
*require_paths  Array   ["lib"] ç”¨äºrequireè°ƒç”¨æ—¶çš„é»˜è®¤è·¯å¾„
files   Array           gemsæ‰€åŒ…å«çš„æ–‡ä»¶
*** 4ã€ç¼–è¯‘
gem build gemspecæ–‡ä»¶
*** 5ã€å®‰è£…
gem install ç”Ÿæˆçš„gem
*** 6ã€æµ‹è¯•
    require 'rubygems'
    require 'hello'
    puts hello

** example
*** å¤šè™šæ‹Ÿå±æ€§çš„æŠ½è±¡
    å•çº¯ä»£ç çº§çš„æŠ½è±¡
    ä¸šåŠ¡æ–¹é¢çš„æŠ½è±¡
**** before
  def self.hot_topics(forum_id, limit = 9)
    Topic.find_all_by_forum_id(forum_id, :conditions => "status_flag <> 'hidden' and status_flag <> 'delete' and (status_flag = 'good' or status_flag = 'mid' or posts_count > 5 or view_count > 150)", :order => "created_at desc", :limit => limit)
  end

  def self.hot_topics_for_new_board(forum_id = 48, limit = 9)
    Topic.find_all_by_forum_id(forum_id, :conditions => "status_flag <> 'hidden' and status_flag <> 'delete' and (status_flag = 'good' or status_flag = 'mid' or posts_count > 3 or view_count > 100)", :order => "created_at desc", :limit => limit)
  end
**** after
  def hot_find(forum_id, limit, params)
    params[:posts_count] ||= 3
    params[:view_count] ||= 100
    Topic.find_all_by_forum_id(forum_id, :conditions => "status_flag <> 'hidden' and status_flag <> 'delete' and \
      (status_flag = 'good' or status_flag = 'mid' or posts_count > #{params[:posts_count]} or view_count > #{params[:view_count]})",
      :order => "created_at desc", :limit => limit)
  end

  def self.hot_topic(forum_id, limit = 9)
    hot_find(forum_id, limit, :posts_count=>3, :view_count=>100)
  end

  def self.hot_topics_for_new_board(forum_id, limit = 9)
    hot_find(forum_id, limit, :posts_count=>5, :view_count=>150)
  end
*** viewï¼š
    index: frame
    _content: pieces
    helper:
** bug
*** plugin can't works: runner.rb:load_plugin_reviews: plugins = $LOAD_PATH[0]+'/'+plugins
    æ— æ³•æ‰¾åˆ°ç›¸å¯¹è·¯å¾„ä½ç½®
172            plugins = "rails_best_practices/plugins/reviews"
173            plugins = $LOAD_PATH[0] + '/' + plugins
*** plugin config: pluginsä¸­çš„è‡ªå®šä¹‰è§„åˆ™å‡èµ·ä½œç”¨ï¼Œä¸å—é…ç½®æ–‡ä»¶æŸç¼š
** review
   pluginsè‡ªå®šä¹‰è§„åˆ™å¯ä»¥ç”Ÿæ•ˆï¼›
   æ’ä»¶æ¶‰åŠåˆ°rspecã€sexp(s-expression)
   è‡ªå®šä¹‰æ—¶ï¼Œéœ€è¦å¯¹ä»£ç ç»“æ„è¿›è¡Œæ€»ç»“ï¼Œè¿˜éœ€è¦ç†Ÿæ‚‰sexpè®¿é—®æ¥å£ï¼ˆlib/rails_best_practices/core/visitable_sexp.rbï¼‰
* report
** 201106
å‰ç«¯é¡µé¢ï¼š
    è°ƒæ•´ç¼–è¾‘åˆ—è¡¨é¡µé¢ï¼›
    è°ƒæ•´ç²¾åæœ€ç»ˆé¡µçš„æ ·å¼å’Œå¹¿å‘Šä½ç½®ï¼›
    åˆ é™¤æ–‡æ‘˜/feedå‰ç«¯ä»£ç 

åå°ç®¡ç†ï¼š
    æ ‡ç­¾ç®¡ç†å¢åŠ æŒ‰åˆ†ç±»æŸ¥è¯¢åŠŸèƒ½ï¼›å¢åŠ è®¾ç½®åˆ†ç±»/åˆ«åæ—¶çš„ajaxæ•ˆæœï¼›
    æ¨èæ ‡ç­¾ï¼šæ”¹ä¸ºåˆ†ç±»ç®¡ç†ï¼Œå¹¶å¢åŠ åˆ†ç±»æè¿°ã€åˆ†ç±»æ’åºå­—æ®µï¼›
    å¢åŠ å…¬å‘Šç®¡ç†ï¼›
    å¢åŠ åå°ç®¡ç†å¸ƒå±€æ–‡ä»¶ï¼›è°ƒæ•´åå°ç®¡ç†ä»£ç åˆ°supportä¸‹
** 201105
ç ”ç©¶rails_best_practiceåŠŸèƒ½åŠè‡ªå®šä¹‰è§„åˆ™
ip_firewallæ’ä»¶æŠ½å–ï¼Œæ¯”è¾ƒåŸå®ç°æ–¹å¼ä¸hiredis-rbæ€§èƒ½ï¼Œç»“è®ºåŸå®ç°æ–¹å¼æ€§èƒ½ä¼˜äºhiredis-rbï¼Œä½†åè€…åŠŸèƒ½å°è£…æ›´å®Œå–„

javaeyeåå°ç®¡ç†ï¼š
  ç®¡ç†å‘˜ç®¡ç†å–æ¶ˆåˆ é™¤åŠŸèƒ½
  å¢åŠ åŠŸèƒ½ï¼šæ¨èæ ‡ç­¾ã€ç¼–è¾‘ç®¡ç†

èµ„è®¯å’Œç²¾åé¢‘é“ï¼š
  é¢‘é“é¦–é¡µå·¦ä¾§æ ï¼šå¢åŠ ç¼–è¾‘åˆ—è¡¨ã€ç²¾ååˆ†ç±»å¯¼èˆªï¼›
  é¢‘é“é¦–é¡µå³ä¾§æ ï¼šå¢åŠ æœ€æ–°è¯„è®º
  èµ„è®¯é¢‘é“ä¸€çº§åˆ†ç±»é¡µå’ŒäºŒçº§tagé¡µï¼šä¿®æ”¹ä¸ºä¸‰æ å¸ƒå±€

